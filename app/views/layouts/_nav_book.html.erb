<nav class='book-navbar'>
    <!-- This if will stay here just in case the other if fails somehow. -->
    <% if request.original_url == url_for(should_return_to) %>
        <% should_return_to = books_path %>
    <% end %>

    <% if current_user && @book.user_id == current_user.id %>
        <%= link_to '<i class="fa-solid fa-circle-arrow-left"></i>'.html_safe, page ? edit_book_path(book) : should_return_to, method: "get", class: "book-return-button" %>
    <% end %>

    <% if page %>
        <div class='nav_route_tool'>
            <%= link_to '<i class="fa-solid fa-house flex-item-no-shrink"></i>'.html_safe, books_path, method: "get", class: "book-home-button" %>
            <i id='arrow_right' class="fa-solid fa-arrow-right flex-item-no-shrink"></i>
            <%= link_to @book.title, edit_book_path(book) , method: "get", class: "book-home-name" %>
            <i id='arrow_right' class="fa-solid fa-arrow-right flex-item-no-shrink"></i>

            <% if hide_input %>
                <strong>
                    <%= @page.main_title -%>
                </strong>
            <% else %>
                <label class='input-sizer'>
                <%= form_with(model: @page, local: true, url:book_page_path(book, @page), method: :patch) do |f| %>

                    <%= f.text_field :main_title, placeholder: "Page title here", id: "page_main_title_nav" %>
                <% end %>

                </label>
            <% end %>

        </div>
    <% end %>

    <%= link_to "<i class='fa-solid fa-circle-half-stroke'></i>".html_safe,'', title: "Change color theme", data: {action: 'click->webtheme#changeTheme'} %>



    <% if !current_user && !page %>
        <ul>
            <li><%= link_to "Login", new_user_session_path %></li>
            <li><%= link_to "Sign up", new_user_registration_path %></li>
        </ul>
    <% end %>

    <% if request.original_url.split('/')[-1].strip != "edit_info" && !page %>
        <% if current_user && @book.user_id == current_user.id %>
            <div class='fullscreen-toggle'>
                <i data-controller='fullscreen' data-action="click->fullscreen#openFullscreen" class="fa-solid fa-expand"></i>
                <%= link_to '<i class="fa-solid fa-gear"></i>'.html_safe, edit_info_book_path, method: "get", class: "book-edit-button" %>
            </div>
        <% end %>
    <% end %>

</nav>


<script>
    document.getElementsByTagName('header')[0].setAttribute('style', 'padding: 0px !important')
</script>