<div class='toolbox'>
    <div class='change-editor-mode-button'>
        <span>
            <i class="fa-solid fa-eye"></i>
        </span>

        <span>
            <label for='editor-mode-toggle' class='switch'>
                <input <%= edit ? "checked" : "" %>  type='checkbox' id='editor-mode-toggle'>
                <span class='slider round'></span>
            <label>
        </span>

        <span>
            <i class="fa-solid fa-pen-nib"></i>
        </span>
    </div>


    <% if edit %>
        <div class='save-page-button'>
            <input style='display:none;' id='sub__b' type="submit" name="commit" value="Update Page" data-disable-with="Update Page">
            <i id='sub__' class="fa-solid fa-circle-check"></i>
        </div>
    <% end %>

</div>

<% if edit %>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const SUBMIT_ICON = document.getElementById('sub__')

            SUBMIT_ICON.addEventListener("click", () => {
                document.getElementById('sub__b').click()
            })
        })
    </script>
<% end %>


<script>
    document.addEventListener("DOMContentLoaded", () => {
        const TOGGLE = document.getElementById('editor-mode-toggle')
        let current_path = window.location.pathname

        

        TOGGLE.addEventListener("click", () => {
            let new_mode = current_path.includes("/edit") 
            ? 
            current_path.replace('/edit', "")
            : 
            current_path + "/edit" 
  
            window.location.href = new_mode;

        })
    })
</script>